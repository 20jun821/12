<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>환영의 미로</title>
    <style>
        body {
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f0f0f0;
        }

        #game-container {
            position: relative;
            width: 600px;
            height: 400px;
            border: 2px solid #333;
            overflow: hidden;
            background-color: #fff;
        }

        #player {
            position: absolute;
            width: 20px;
            height: 20px;
            background-color: blue;
        }

        .wall {
            position: absolute;
            background-color: gray;
        }

        #goal {
            position: absolute;
            width: 20px;
            height: 20px;
            background-color: green;
            top: 350px;
            left: 550px;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div id="player"></div>
        <div class="wall" style="top: 100px; left: 200px; width: 20px; height: 100px;"></div>
        <div class="wall" style="top: 300px; left: 100px; width: 100px; height: 20px;"></div>
        <!-- 추가 벽 -->
        <div id="goal"></div>
    </div>
    <script>
        const player = document.getElementById('player');
        const gameContainer = document.getElementById('game-container');
        let playerPosition = { top: 0, left: 0 };

        document.addEventListener('keydown', (event) => {
            switch (event.key) {
                case 'ArrowUp':
                    movePlayer(0, -10);
                    break;
                case 'ArrowDown':
                    movePlayer(0, 10);
                    break;
                case 'ArrowLeft':
                    movePlayer(-10, 0);
                    break;
                case 'ArrowRight':
                    movePlayer(10, 0);
                    break;
            }
        });

        function movePlayer(deltaX, deltaY) {
            const newTop = playerPosition.top + deltaY;
            const newLeft = playerPosition.left + deltaX;

            // 벽과의 충돌 체크
            if (!isColliding(newTop, newLeft)) {
                playerPosition.top = newTop;
                playerPosition.left = newLeft;
                player.style.top = playerPosition.top + 'px';
                player.style.left = playerPosition.left + 'px';
            }

            // 목표 도달 체크
            checkGoal();
        }

        function isColliding(top, left) {
            const walls = document.querySelectorAll('.wall');
            for (const wall of walls) {
                const wallRect = wall.getBoundingClientRect();
                const playerRect = {
                    top: top,
                    left: left,
                    bottom: top + 20,
                    right: left + 20
                };

                if (playerRect.right > wallRect.left &&
                    playerRect.left < wallRect.right &&
                    playerRect.bottom > wallRect.top &&
                    playerRect.top < wallRect.bottom) {
                    return true;
                }
            }
            return false;
        }

        function checkGoal() {
            const goal = document.getElementById('goal');
            const goalRect = goal.getBoundingClientRect();
            const playerRect = player.getBoundingClientRect();

            if (playerRect.right > goalRect.left &&
                playerRect.left < goalRect.right &&
                playerRect.bottom > goalRect.top &&
                playerRect.top < goalRect.bottom) {
                alert('목표에 도달했습니다!');
                resetGame();
            }
        }

        function resetGame() {
            playerPosition = { top: 0, left: 0 };
            player.style.top = playerPosition.top + 'px';
            player.style.left = playerPosition.left + 'px';
        }
    </script>
</body>
</html>
